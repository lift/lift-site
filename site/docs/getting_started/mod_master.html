<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Starting with Lift</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/"gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/"gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="mod_master.tex"> 
<meta name="date" content="2009-04-19 08:31:00"> 
<link rel="stylesheet" type="text/css" href="mod_master.css"> 
</head><body 
>
   <div class="maketitle">
                                                                                         
                                                                                         
                                                                                         
                                                                                         

<h2 class="titleHead">Starting with Lift</h2>
<div class="author" ><span 
class="pplr8t-x-x-120">By Derek Chen-Becker, Marius Danciu, David Pollak and Tyler Weir</span></div>
<br />
<div class="date" ><span 
class="pplr8t-x-x-120">April 19, 2009</span></div>
   </div><span 
class="pplr8t-x-x-90">Copyright </span><span 
class="pplr8c-x-x-90">© </span><span 
class="pplr8t-x-x-90">2008, 2009 Derek Chen-Becker, Marius Danciu, David Pollak and Tyler Weir</span>
<!--l. 90--><p class="noindent" ><span 
class="pplr8t-x-x-90">This work is licensed under the Creative Commons Attribution-No Derivative Works 3.0 Unported License.</span>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   <span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Welcome to Lift!</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">Why Lift?</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-40001.2" id="QQ2-1-4">For more information</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-50001.3" id="QQ2-1-5">Your first Lift application</a></span>
<br />   <span class="sectionToc" >2 <a 
href="#x1-60002" id="QQ2-1-6">Basic Lift</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-70002.1" id="QQ2-1-7">What we&#8217;re going to cover</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-80002.2" id="QQ2-1-8">Creating a new project</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.3 <a 
href="#x1-90002.3" id="QQ2-1-10">Adding a model</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.4 <a 
href="#x1-100002.4" id="QQ2-1-12">Boot and Schemifier</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.5 <a 
href="#x1-110002.5" id="QQ2-1-15">Snippets: Bridging View and Logic</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.6 <a 
href="#x1-120002.6" id="QQ2-1-17">Lift&#8217;s &#8220;View First&#8221; design</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.7 <a 
href="#x1-130002.7" id="QQ2-1-18">Updating the ToDo view</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.8 <a 
href="#x1-140002.8" id="QQ2-1-20">Seeing if the snippet works</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.9 <a 
href="#x1-150002.9" id="QQ2-1-21">Creating a to-do item</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.10 <a 
href="#x1-160002.10" id="QQ2-1-23">Updating the priority and desc fields</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.11 <a 
href="#x1-170002.11" id="QQ2-1-27">Hooking up the view to the form</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.12 <a 
href="#x1-180002.12" id="QQ2-1-29">Trying it out again</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.13 <a 
href="#x1-190002.13" id="QQ2-1-30">Display and Editting to-do items</a></span>
   </div>
                                                                                         
                                                                                         
   <h3 class="sectionHead"><span class="titlemark">1    </span> <a 
 id="x1-20001"></a>Welcome to Lift!</h3>
<!--l. 4--><p class="noindent" >Lift is designed to make powerful techniques easily accessible, while keeping the overall
framework simple and flexible. It may sound like a cliché, but in our experience Lift makes it
fun to develop because it lets you focus on the interesting parts of coding. Our goal for this
book is that by the end, you&#8217;ll be able to create and extend any web application you can think
of.
<!--l. 12--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.1    </span> <a 
 id="x1-30001.1"></a>Why Lift?</h4>
<!--l. 14--><p class="noindent" >For those of you have experience with other web frameworks such as Struts, Tapestry, Rails, et cetera, you
must be asking yourself "Why another framework? Does Lift really solve problems any differently or
more effectively than the ones I&#8217;ve used before?" Based on our experience (and of others in the growing
Lift community), the answer is an emphatic "Yes!" Lift has cherry-picked the best ideas from a number
of other frameworks, while creating some novel ideas of its own. It&#8217;s this combination of
solid foundation and new techniques that makes Lift so powerful. At the same time, Lift
has been able to avoid the mistakes made in the past by other frameworks. In the spirit of
&#8220;configuration by convention&#8221;, Lift has sensible defaults for everything, while making it easy
to customize precisely what you need to; no more and no less. Gone are the days of XML
file after XML file providing <span 
class="pplri8t-x-x-109">basic configuration </span>for your application. Instead, a basic Lift app
only requires that you add the LiftFilter to your web.xml and add one or more lines telling
Lift what package your classes sit in. The methods you code aren&#8217;t required to implement a
specific interface (called a trait), although there are support traits that make things that much
simpler. In short, you don&#8217;t need to write anything that isn&#8217;t explicitly necessary for the task at
hand; Lift is intended to work out of the box, and to make you as efficient and productive as
possible.
<!--l. 37--><p class="indent" >   One of the key strengths of Lift is the clean separation of presentation
content and logic, based on the bedrock concept of the Model-View-Controller
pattern<span class="footnote-mark"><a 
href="mod_master2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-3001f1"></a> .
One of the original Java web application technologies that&#8217;s still in use today is JSP, or Java Server
Pages<span class="footnote-mark"><a 
href="mod_master3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-3002f2"></a> .
JSP allows you to mix HTML and Java code directly within the page. While this may have seemed like a
good idea at the start, it has proven to be painful in practice. Putting code in your presentation layer
makes it more difficult to debug and understand what is going on within a page, and makes it more
difficult for the people writing the HTML portion because the contents aren&#8217;t valid HTML. While many
modern programming and HTML editors have been modified to accomodate this mess, proper syntax
highlighting and validation don&#8217;t make up for the fact that you still have to switch back and forth
between one or more files to follow the page flow. Lift takes the approach that there should be no
code in the presentation layer, but that the presentation layer has to be flexible enough to
accomodate any conceivable uses. To that end, Lift uses a powerful templating system, a la
                                                                                         
                                                                                         
Wicket<span class="footnote-mark"><a 
href="mod_master4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-3003f3"></a> , to bind
user-generated data into the presentation layer. Lift&#8217;s templating is built on the XML processing capabilities of the
Scala Language<span class="footnote-mark"><a 
href="mod_master5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-3004f4"></a> ,
and allows things such as nested templates, simple injection of user-generated content, and
advanced data binding capabilities. For those coming from JSP, Lift&#8217;s advanced template and XML
processing allows you to essentially write custom tag libraries at a fraction of the cost in time and
effort.
<!--l. 70--><p class="indent" >   Lift has another advantage that no other web framework currently shares: the Scala
programming language. Scala is a relatively new language developed by Martin
Odersky<span class="footnote-mark"><a 
href="mod_master6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-3005f5"></a> 
and his group at EPFL Switzerland. It compiles to Java bytecode and runs on the JVM, which means that
you can leverage the vast ecosystem of Java libraries just as you would with any other java
web framework. At the same time, Scala introduces some very powerful features designed
to make you, the developer, more productive. Among these features are an extremely rich
type system along with powerful type inference, native XML processing, full support for
closures and functions as objects, and an extensive high-level library. The power of the type
system along with its type inferencing has led people to call it &#8220;the statically typed dynamic
language&#8221;<span class="footnote-mark"><a 
href="mod_master7.html#fn6x0"><sup class="textsuperscript">6</sup></a></span><a 
 id="x1-3006f6"></a> .
That means you can write code as quickly as you could with dynamically typed languages (Python,
Ruby, etc.), but you have the compile-time type safety of a statically typed language like Java. Scala is also
a hybrid functional and Object-oriented language, which means you can get the power of the higher-level
functional (or FP) languages (such as Haskell, Scheme, etc) while retaining the modularity and reusability
of OO components. In particular, the FP concept of immutability is well represented in Scala, and is one
of the simplest means to high throughput scalability. The hybrid model also means that if you
haven&#8217;t touched FP before, you can gradually ease into it. In our experience, Scala allows
you to do more in Lift with less lines of code; remember, Lift is all about making you more
productive!
<!--l. 100--><p class="indent" >   Lift strives to encompass advanced features in a very concise and straightforward manner.
Lift&#8217;s powerful support for AJAX and COMET allow you to use Web 2.0 features with very
little effort. Lift leverages Scala&#8217;s Actor library to provide a message-driven framework for
COMET updates. In most cases, adding COMET support to a page just involves extending a
trait<span class="footnote-mark"><a 
href="mod_master8.html#fn7x0"><sup class="textsuperscript">7</sup></a></span><a 
 id="x1-3007f7"></a>  to
define the rendering method of your page and adding an extra function call to your links to dispatch the
                                                                                         
                                                                                         
update message; Lift handles all of the backend and page-side coding to effect the COMET polling. AJAX
support includes special handlers for doing AJAX form submission via JSON, and almost any link
function can easily be turned into an AJAX version with a few keystrokes. In order to preform all
of this client-side goodness, Lift has a class hierarchy for encapsulating Javascript calls via
direct Javascript, jQuery and YUI. The nice part is that you, too, can utilize these support
classes so that you can generate the code and don&#8217;t have to put Javascript logic into your
templates.
   <h4 class="subsectionHead"><span class="titlemark">1.2    </span> <a 
 id="x1-40001.2"></a>For more information</h4>
<!--l. 123--><p class="noindent" >Lift has a very active community of users and developers. Since its inception in early 2007 the
community has grown to hundreds of members from all over the world. The project&#8217;s leader, David
Pollak<span class="footnote-mark"><a 
href="mod_master9.html#fn8x0"><sup class="textsuperscript">8</sup></a></span><a 
 id="x1-4001f8"></a> is
constantly attending to the mailing list, answering questions and taking feature requests. There is a core
group of developers who work on the project, but submissions are taken from anyone who
makes a good case and can turn in good code. While we strive to cover everything you&#8217;ll
need to know in this book, here are several additional resources available for information on
Lift:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-4003x1">The first place to look is the Wiki at    <a 
href="http://liftweb.net/index.php/Main_Page" class="url" ><span 
class="pcrr8t-x-x-109">http://liftweb.net/index.php/Main_Page</span></a>.
     The  Wiki  is  maintained  not  only  by  David,  but  by  many  active  members  of  the  Lift
     community (including the authors). Portions of this book as inspired by and borrow from
     content  on  the  Wiki.  In  particular,  it  has  links  to  all  of  the  generated  documentation  not
     only for the stable branch, but for the unstable head if you&#8217;re feeling adventurous. There&#8217;s
     also an extensive section of HowTos and articles on advanced topics that covers a wealth of
     information.
     </li>
     <li 
  class="enumerate" id="x1-4005x2">The mailing list at    <a 
href="http://groups.google.com/group/liftweb" class="url" ><span 
class="pcrr8t-x-x-109">http://groups.google.com/group/liftweb</span></a> is very active and
     if  there  are  things  that  this  book  doesn&#8217;t  cover  you  can  feel  free  to  ask  questions  there;
     there  are  plenty  of  very  knowledgeable  people  on  the  list  that  should  be  able  to  answer
     your questions. Please post specific questions about the book to the Lift Book Google Group
     found     <a 
href="http://groups.google.com/group/the-lift-book" class="url" ><span 
class="pcrr8t-x-x-109">http://groups.google.com/group/the-lift-book</span></a>,  anything  else  that  is
     Lift-specific is fair game for the mailing list.
     </li>
     <li 
  class="enumerate" id="x1-4007x3">Lift has an IRC channel at    <a 
href="irc://irc.freenode.net/lift" class="url" ><span 
class="pcrr8t-x-x-109">irc://irc.freenode.net/lift</span></a> that usually has several
     people on at any given time. It&#8217;s a great place to chat about issues and ideas concerning Lift.</li></ol>
   <h4 class="subsectionHead"><span class="titlemark">1.3    </span> <a 
 id="x1-50001.3"></a>Your first Lift application</h4>
<!--l. 156--><p class="noindent" >We&#8217;ve talked a lot about Lift and its capabilities, so now let&#8217;s get hands-on and try out an application.
Before we start, though, we need to take care of some prerequisites:
                                                                                         
                                                                                         
     <dl class="description"><dt class="description">
<span 
class="pplb8t-x-x-109">Java</span><span 
class="pplb8t-x-x-109">&#x00A0;1.5</span><span 
class="pplb8t-x-x-109">&#x00A0;JDK</span> </dt><dd 
class="description">Lift runs on Scala, which runs on top of the JVM; the first thing you&#8217;ll need to install
     is a modern version of the Java SE JVM, available at    <a 
href="http://java.sun.com/" class="url" ><span 
class="pcrr8t-x-x-109">http://java.sun.com/</span></a>. Please
     install JDK 1.5 or newer. If you&#8217;re using a Mac, the JDK is already installed.
     </dd><dt class="description">
<span 
class="pplb8t-x-x-109">Maven</span><span 
class="pplb8t-x-x-109">&#x00A0;2</span> </dt><dd 
class="description">Maven  is  a  project  management  tool.  Maven  has  extensive  capabilities  for  building,
     dependency  management,  testing  and  reporting.  If  you  haven&#8217;t  used  Maven  before
     you   can   think   of   it   as   an   incredibly   powerful   version   of   <span 
class="pcrr8t-x-x-109">make </span>for   now.   You   can
     download  the  latest  version  of  Maven  from       <a 
href="http://maven.apache.org/" class="url" ><span 
class="pcrr8t-x-x-109">http://maven.apache.org/</span></a>.  Brief
     installation   instructions   (enough   to   get   us   started)   are   on   the   download   page,   at
     <a 
href="http://maven.apache.org/download.html" class="url" ><span 
class="pcrr8t-x-x-109">http://maven.apache.org/download.html</span></a>.  You  must  have  Maven  2.0.9  or  greater
     installed. Mac OS X has Maven 2.0.6 installed. Please install 2.0.9 and make sure that the
     version that you installed is the first version accessed in the PATH.
     </dd><dt class="description">
<span 
class="pplb8t-x-x-109">Programming</span><span 
class="pplb8t-x-x-109">&#x00A0;editor</span> </dt><dd 
class="description">This  isn&#8217;t  a  strict  requirement  for  this  example,  but  when  we  start
     getting   into   coding   it&#8217;s   very   helpful   to   have   something   a   little   more   capable   than
     notepad.   If   you&#8217;d   like   a   full-blown   IDE,   with   support   for   things   like   debugging,
     continuous  compile  checking,  etc,  there  are  plugins  available  on  the  Scala  website  at
     <a 
href="http://www.scala-lang.org/node/91" class="url" ><span 
class="pcrr8t-x-x-109">http://www.scala-lang.org/node/91</span></a>. The plugins support:
     <!--l. 181--><p class="noindent" >
                <dl class="list2"><dt class="list">
     Eclipse    </dt><dd 
class="list">
                <!--l. 182--><p class="noindent" >  <a 
href="http://www.eclipse.org/" class="url" ><span 
class="pcrr8t-x-x-109">http://www.eclipse.org/</span></a> The Scala plugin developer recommends using
                the <span 
class="pplri8t-x-x-109">Eclipse Classic </span>version of the IDE
                </dd><dt class="list">
     NetBeans  </dt><dd 
class="list">
                <!--l. 184--><p class="noindent" >  <a 
href="http://www.netbeans.org" class="url" ><span 
class="pcrr8t-x-x-109">http://www.netbeans.org</span></a> Requires using the NetBeans 6.5
                </dd><dt class="list">
     IntelliJ    </dt><dd 
class="list">
                <!--l. 186--><p class="noindent" >IDEA    <a 
href="http://www.jetbrains.com/idea/index.html" class="url" ><span 
class="pcrr8t-x-x-109">http://www.jetbrains.com/idea/index.html</span></a> Requires version
                8 beta</dd></dl>
     <!--l. 189--><p class="noindent" >If you&#8217;d like something more lightweight, the Scala language distribution comes with plugins for
     editors like VIM, Emacs, jedit, etc. You can either download the full Scala distribution from
     <a 
href="http://www.scala-lang.org/" class="url" ><span 
class="pcrr8t-x-x-109">http://www.scala-lang.org/</span></a> and use the files under <span 
class="pcrr8t-x-x-109">misc/scala-tool-support</span>, or
     you can directly access the latest versions via the SVN (Subversion) interface at
     <a 
href="https://lampsvn.epfl.ch/trac/scala/browser/scala-tool-support/trunk/src" class="url" ><span 
class="pcrr8t-x-x-109">https://lampsvn.epfl.ch/trac/scala/browser/scala-tool-support/trunk/src</span></a>.
     Getting these plugins to work in your IDE or editor of choice is beyond the scope of this
     book.
     </dd></dl>
<!--l. 199--><p class="noindent" >Now that we have the prerequisites out of the way, it&#8217;s time to get started. We&#8217;re going to leverage Maven&#8217;s
archetypes to do 99% of the work for us in this example. First, change to whatever directory you&#8217;d like to
work in:
<!--l. 203--><p class="noindent" >
                                                                                         
                                                                                         
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 203--><p class="noindent" ><span 
class="pcrr8t-x-x-109">cd</span><span 
class="pcrr8t-x-x-109">&#x00A0;work</span></dd></dl>
<!--l. 206--><p class="noindent" >Next, we use Maven&#8217;s <span 
class="pcrr8t-x-x-109">archetype:generate </span>command to create the skeleton of our project:
<!--l. 208--><p class="noindent" >
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 208--><div class="noindent" ><span 
class="pcrr8t-x-x-109">mvn</span><span 
class="pcrr8t-x-x-109">&#x00A0;archetype:generate</span><span 
class="pcrr8t-x-x-109">&#x00A0;-U</span><span 
class=p"crr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 211--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DarchetypeGroupId=net.liftweb</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 213--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DarchetypeArtifactId=lift-archetype-blank</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 215--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DarchetypeVersion=1.0</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span>
     <!--l. 217--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DremoteRepositories=http://scala-tools.org/repo-releases</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 219--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DgroupId=demo.helloworld</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 221--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-DartifactId=helloworld</span><span 
class="pcrr8t-x-x-109">&#x00A0;\</span></div>
     <!--l. 223--><div class="noindent" ><span 
class="pcrr8t-x-x-109">&#x00A0;</span><span 
class="pcrr8t-x-x-109">&#x00A0;-Dversion=1.0-SNAPSHOT</span></div></dd></dl>
<!--l. 225--><p class="noindent" >Maven should output several page&#8217;s worth of text. It may stop and ask you to confirm the properties
configuration, in which case you can just hit <span 
class="pcrr8t-x-x-109">&#x003C;enter&#x003E;</span>. At the end you should get a message that says
<span 
class="pcrr8t-x-x-109">BUILD SUCCESSFUL</span>. You&#8217;ve now successfully created your first project! Don&#8217;t believe us? Let&#8217;s run it to
confirm:
<!--l. 230--><p class="noindent" >
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 230--><p class="noindent" ><span 
class="pcrr8t-x-x-109">cd</span><span 
class="pcrr8t-x-x-109">&#x00A0;helloworld</span>
     <!--l. 233--><p class="noindent" ><span 
class="pcrr8t-x-x-109">mvn</span><span 
class="pcrr8t-x-x-109">&#x00A0;jetty:run</span></dd></dl>
<!--l. 235--><p class="noindent" >Maven should produce more output, ending with
<!--l. 236--><p class="noindent" >
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 236--><p class="noindent" ><span 
class="pcrr8t-x-x-109">[INFO]</span><span 
class="pcrr8t-x-x-109">&#x00A0;Starting</span><span 
class="pcrr8t-x-x-109">&#x00A0;scanner</span><span 
class="pcrr8t-x-x-109">&#x00A0;at</span><span 
class="pcrr8t-x-x-109">&#x00A0;interval</span><span 
class="pcrr8t-x-x-109">&#x00A0;of</span><span 
class="pcrr8t-x-x-109">&#x00A0;5</span><span 
class="pcrr8t-x-x-109">&#x00A0;seconds.</span></dd></dl>
<!--l. 239--><p class="noindent" >This means that you now have a web server (Jetty<span class="footnote-mark"><a 
href="mod_master10.html#fn9x0"><sup class="textsuperscript">9</sup></a></span><a 
 id="x1-5001f9"></a> )
running on port 8080 of your machine. Just go to   <a 
href="http://localhost:8080/" class="url" ><span 
class="pcrr8t-x-x-109">http://localhost:8080/</span></a> and you&#8217;ll see
your first Lift page, the standard &#8220;Hello world!&#8221;. With just a few simple commands we&#8217;ve
built a functional (albeit limited) web app. Let&#8217;s go into a little more detail and see exactly
how these pieces fit together. First, let&#8217;s examine the index page. Whenever Lift serves up
a request where the URL ends in a forward slash, Lift automatically looks for a file called
                                                                                         
                                                                                         
index.html<span class="footnote-mark"><a 
href="mod_master11.html#fn10x0"><sup class="textsuperscript">10</sup></a></span><a 
 id="x1-5002f10"></a> 
in that directory. For instance, if you tried to go to <span 
class="pcrr8t-x-x-109">http://localhost:8080/test/</span>, Lift would look
for index.html under the <span 
class="pcrr8t-x-x-109">test/ </span>directory in your project. The HTML sources will be located under
<span 
class="pcrr8t-x-x-109">src/main/webapp/ </span>in your project directory Here&#8217;s the <span 
class="pcrr8t-x-x-109">index.html </span>file from our Hello World
project:
   <!--l. 258-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-5003r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:surround</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">with</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">default</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">at</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">h2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Welcome</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">your</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">project</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">h2</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:helloWorld</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">howdy</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">p</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5006r4"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:surround</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 266--><p class="indent" >   This may look a little strange at first. For those with some XML experience you may recognize the use
of prefixed elements here. For those who don&#8217;t know what that is, a prefixed element is an XML element
of the form
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 270--><p class="noindent" ><span 
class="pcrr8t-x-x-109">&#x003C;prefix:element&#x003E;</span></dd></dl>
<!--l. 273--><p class="noindent" >In our case we have two elements in use: <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround&#x003E; </span>and <span 
class="pcrr8t-x-x-109">&#x003C;lift:helloWorld.howdy/&#x003E;</span>. Lift
assigns special meaning to elements that use the &#8220;lift&#8221; prefix; they form the basis of lift&#8217;s extensive
templating support. When Lift processes an XML template, it does so from the outermost element
inward. In our case, the outermost element is <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround with=&#8221;default&#8221; at=&#8221;content&#8221;&#x003E;</span>.
The <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround&#x003E; </span>element basically tells Lift to find the template named by the <span 
class="pplri8t-x-x-109">with </span>attribute
(<span 
class="pplri8t-x-x-109">default</span>, in our case) and to put the contents of our element inside of that template. The <span 
class="pplri8t-x-x-109">at </span>attribute tells
Lift where in the template to place our content. In Lift, this &#8220;filling in the blanks&#8221; is called <span 
class="pplri8t-x-x-109">binding</span>, and it&#8217;s
a fundamental concept of Lift&#8217;s template system. Just about everything at the HTML/XML level can be
thought of as a series of nested binds. Before we move on to the <span 
class="pcrr8t-x-x-109">&#x003C;lift:helloWorld.howdy/&#x003E; </span>element,
let&#8217;s recurse and look at the default template. You can find it in the <span 
class="pcrr8t-x-x-109">templates-hidden </span>directory of the
web app. Much like the <span 
class="pcrr8t-x-x-109">WEB-INF </span>and <span 
class="pcrr8t-x-x-109">META-INF </span>directories in a Java web application, the
contents of <span 
class="pcrr8t-x-x-109">templates-hidden </span>cannot be accessed directly by clients; they can, however be
accessed when they&#8217;re referenced by a <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround&#x003E; </span>element. Here is the <span 
class="pcrr8t-x-x-109">default.html</span>
file:
   <!--l. 297-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-5007r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">xmlns</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">http:</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">www</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">w3</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">org</span><span 
class="pcrr8t-">/1999/</span><span 
class="pcrr8t-">xhtml</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">xmlns:lift</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">http:</span><span 
class="pcrr8t-">//</span><span 
class="pcrr8t-">liftweb</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">net</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5008r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">head</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5009r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">meta</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">http</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">equiv</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">type</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">text</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">charset</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">UTF</span><span 
class="pcrr8t-">-8</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5010r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">meta</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">description</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5011r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">meta</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">keywords</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5012r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5013r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">title</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">demo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">helloworld:helloworld:1</span><span 
class="pcrr8t-">.0-</span><span 
class="pcrr8t-">SNAPSHOT</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">title</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5014r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">script</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">id</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">jquery</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">src</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">classpath</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">jquery</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">js</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">type</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">text</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">javascript</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5015r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">script</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5016r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">head</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5017r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">body</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5018r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:bind</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5019r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:Menu</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">builder</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5020r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:msgs</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5021r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">body</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5022r16"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 317--><p class="indent" >   As you can see in the listing, this is a proper XHTML file, with <span 
class="pcrr8t-x-x-109">&#x003C;html&#x003E;</span>, <span 
class="pcrr8t-x-x-109">&#x003C;head&#x003E;</span>, and <span 
class="pcrr8t-x-x-109">&#x003C;body&#x003E; </span>tags.
This is required since Lift doesn&#8217;t add these itself; Lift simply processes the XML from each template it
encounters. The <span 
class="pcrr8t-x-x-109">&#x003C;head&#x003E; </span>element and its contents are boilerplate; the interesting things happen inside the
<span 
class="pcrr8t-x-x-109">&#x003C;body&#x003E; </span>element. There are three elements here:
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-5024x1">The  <span 
class="pcrr8t-x-x-109">&#x003C;lift:bind name=&#8221;content&#8221; /&#x003E; </span>element  determines  where  the  contents  of  our
                                                                                         
                                                                                         
     index.html file are bound (inserted). The <span 
class="pplri8t-x-x-109">name </span>attribute should match the corresponding <span 
class="pplri8t-x-x-109">at</span>
     attribute from our <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround&#x003E; </span>element.
     </li>
     <li 
  class="enumerate" id="x1-5026x2">The <span 
class="pcrr8t-x-x-109">&#x003C;lift:Menu.builder /&#x003E; </span>element is a special element that builds a menu based on
     the SiteMap. The SiteMap is a high-level site directory component that not only provides
     a centralized place to define a site menu, but allows you to control when certain links are
     displayed (based on, say, whether a user is logged in or what roles they have) and provides
     a page-level access control mechanism.
     </li>
     <li 
  class="enumerate" id="x1-5028x3">The <span 
class="pcrr8t-x-x-109">&#x003C;lift:msgs/&#x003E; </span>element allows Lift (or your code) to display messages on a page as it&#8217;s
     rendered. These could be status messages, error messages, etc. Lift has facilities to set one or
     more messages from inside your logic code.</li></ol>
<!--l. 339--><p class="noindent" >Now let&#8217;s look back at the <span 
class="pcrr8t-x-x-109">&#x003C;lift:helloWorld.howdy/&#x003E; </span>element from the <span 
class="pcrr8t-x-x-109">index.html </span>file. This element
(and the <span 
class="pcrr8t-x-x-109">&#x003C;lift:Menu.builder /&#x003E; </span>element, actually) is called a <span 
class="pplri8t-x-x-109">snippet</span>, and it&#8217;s of the
form
     <dl class="list1"><dt class="list">
     </dt><dd 
class="list">
     <!--l. 343--><p class="noindent" ><span 
class="pcrr8t-x-x-109">&#x003C;lift:class.method&#x003E;</span></dd></dl>
<!--l. 346--><p class="noindent" >Where <span 
class="pcrr8t-x-x-109">class </span>is the name of a Scala class defined in our project in the <span 
class="pcrr8t-x-x-109">demo.helloworld.snippets</span>
package and <span 
class="pcrr8t-x-x-109">method </span>is a method defined on that class. Lift does a little translation on the class name to
change camel-case back into title-case and then locates the class. In our demo the class is located under
<span 
class="pcrr8t-x-x-109">src/main/scala/demo/helloworld/snippet/HelloWorld.scala</span>, and is shown
here:
   <!--l. 354-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-5029r1"></a></span><span 
class="pcrr8t-">package</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">demo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">helloworld</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">snippet</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5030r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5031r3"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">HelloWorld</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5032r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">howdy</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5033r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Welcome</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">helloworld</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">at</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrb8t-">new</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">java</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">Date</span><span 
class="pcrr8t-">}&#x003C;/</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5034r6"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 364--><p class="indent" >   As you can see, the howdy method is pretty straightforward. Lift binds the result of executing the
method into the location of the snippet element (in this case a span). It&#8217;s interesting to note that a method
may itself return other <span 
class="pcrr8t-x-x-109">&#x003C;lift:...&#x003E; </span>elements in its content and they will be processed as well. This
recursive nature of template composition is part of the fundamental power of Lift; it means that reusing
snippets and template pieces across your application is essentially free. You should never have to write
the same functionality more than once.
<!--l. 374--><p class="indent" >   Now that we&#8217;ve covered all of the actual content elements, the final piece of the puzzle is the <span 
class="pcrr8t-x-x-109">Boot</span>
class. The <span 
class="pcrr8t-x-x-109">Boot </span>class is responsible for the configuration and setup of the Lift framework. As we&#8217;ve
stated earlier in the chapter, most of Lift has sensible defaults, so the <span 
class="pcrr8t-x-x-109">Boot </span>class generally contains only
the extras that you need. The <span 
class="pcrr8t-x-x-109">Boot </span>class is always located in the <span 
class="pcrr8t-x-x-109">bootstrap.liftweb </span>package and is
shown here (we&#8217;ve skipped imports, etc):
   <!--l. 383-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-5035r13"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Boot</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5036r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">boot</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5037r15"></a></span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">//</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">where</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">to</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">search</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">snippet</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5038r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LiftRules</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">addToPackages</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">demo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">helloworld</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5039r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5040r18"></a></span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">//</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">Build</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">SiteMap</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5041r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">entries</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Menu</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">Loc</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Home</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Home</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">))</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Nil</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5042r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LiftRules</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">setSiteMap</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">SiteMap</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">entries</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">*))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5043r21"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-5044r22"></a></span><span 
class="pcrr8t-">}</span>
   
                                                                                         
                                                                                         
   </div>
<!--l. 409--><p class="indent" >   There are two basic configuration elements, placed in the <span 
class="pcrr8t-x-x-109">boot </span>method. The first is the
<!--l. 412--><p class="indent" >   <span 
class="pcrr8t-x-x-109">LiftRules.addToPackages </span>method. It tells lift to base its searches in the <span 
class="pcrr8t-x-x-109">demo.helloworld</span>
package. That means that snippets would be located in the <span 
class="pcrr8t-x-x-109">demo.helloworld.snippets </span>package,
views would be located in the <span 
class="pcrr8t-x-x-109">demo.helloworld.views </span>package, etc. If you have more than one
hierarchy (multiple packages) you can just call <span 
class="pcrr8t-x-x-109">addToPackages </span>multiple times. The second item in the
Boot class is the SiteMenu setup.
<!--l. 420--><p class="indent" >   Now that we&#8217;ve covered a basic example we hope you&#8217;re beginning to see why Lift is so powerful and
can make you more productive. We&#8217;ve barely scratched the surface on Lift&#8217;s templating and binding
capabilities, but what we&#8217;ve shown here is already a big step. In roughly 10 lines of Scala code and about
30 in XML we have a functional site. If we wanted to add more pages we&#8217;ve already got our default
template set up so we don&#8217;t need to write the same boilerplate HTML multiple times. In our example
we&#8217;re directly generating the content for our <span 
class="pcrr8t-x-x-109">helloWorld.howdy </span>snippet, but in later examples we&#8217;ll
show just how easy it is to actually pull content <span 
class="pplri8t-x-x-109">from the template itself  </span>into the snippet and modify it as
needed.
<!--l. 432--><p class="indent" >   We hope you&#8217;re as excited about getting started with Lift as we are!
                                                                                         
                                                                                         
                                                                                         
                                                                                         
   <h3 class="sectionHead"><span class="titlemark">2    </span> <a 
 id="x1-60002"></a>Basic Lift</h3>
<!--l. 5--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.1    </span> <a 
 id="x1-70002.1"></a>What we&#8217;re going to cover</h4>
<!--l. 7--><p class="noindent" >We&#8217;re going to build a basic to-do application in Lift. The application will allow you to create an account,
log in, and then enter and modify to-do items.
<!--l. 11--><p class="indent" >   The goal is to show you:
     <ul class="itemize1">
     <li class="itemize">How to create a basic Lift web application
     </li>
     <li class="itemize">How to create a model that maps to a relational database
     </li>
     <li class="itemize">How to create web pages that correspond to back end logic
     </li>
     <li class="itemize">How to bind the elements on the web page to dynamically created content</li></ul>
<!--l. 19--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.2    </span> <a 
 id="x1-80002.2"></a>Creating a new project</h4>
<!--l. 21--><p class="noindent" >The first thing to-do is create a new project. We do this with a build tool called Maven. Maven manages
the compile and test phases of development as well as managing any dependencies by downloading
resources from Internet.
<!--l. 26--><p class="indent" >   From a command prompt, type:
   <!--l. 29-->
<a 
 id="x1-8001r1"></a>
<a 
 id="x1-8002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;1: </td><td  
class="content">Create a new project</td></tr></table><!--tex4ht:label?: x1-8001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-8003r1"></a></span><span 
class="pcrr8t-">mvn</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">archetype</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">generate</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">U</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8004r2"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DarchetypeGroupId</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">net</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftweb</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8005r3"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DarchetypeArtifactId</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">lift</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">archetype</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">basic</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8006r4"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DarchetypeVersion</span><span 
class="pcrr8t-">=1.0</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8007r5"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DremoteRepositories</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">http</span><span 
class="pcrr8t-">:</span><span 
class="pcrro8t-">//</span><span 
class="pcrro8t-">scala</span><span 
class="pcrro8t-">-</span><span 
class="pcrro8t-">tools</span><span 
class="pcrro8t-">.</span><span 
class="pcrro8t-">org</span><span 
class="pcrro8t-">/</span><span 
class="pcrro8t-">repo</span><span 
class="pcrro8t-">-</span><span 
class="pcrro8t-">releases</span><span 
class="pcrro8t-">&#x00A0;</span><span 
class="pcrro8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8008r6"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DgroupId</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8009r7"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">DartifactId</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">\</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-8010r8"></a></span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">Dversion</span><span 
class="pcrr8t-">=0.1-</span><span 
class="pcrr8t-">SNAPSHOT</span>
   
   </div>
<!--l. 42--><p class="indent" >   Now change directories into the newly created todo directory with: <span 
class="pcrr8t-x-x-109">cd todo</span>
<!--l. 45--><p class="indent" >   Type: <span 
class="pcrr8t-x-x-109">mvn jetty:run </span>and in your browser, go to   <a 
href="http://localhost:8080" class="url" ><span 
class="pcrr8t-x-x-109">http://localhost:8080</span></a> You will see that
your application is running. Switch back to your terminal window and type <span 
class="pcrr8t-x-x-109">ctrl-c </span>to stop the Jetty web
server.
<!--l. 50--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.3    </span> <a 
 id="x1-90002.3"></a>Adding a model</h4>
<!--l. 52--><p class="noindent" >Now that we&#8217;ve got a basic application running, we&#8217;re going to add some custom code. Create the file
<span 
class="pcrr8t-x-x-109">src/main/scala/com/liftworkshop/model/ToDo.scala </span>Put the following code into the
file:
   <!--l. 57-->
                                                                                         
                                                                                         
<a 
 id="x1-9001r2"></a>
<a 
 id="x1-9002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;2: </td><td  
class="content">The ToDo model</td></tr></table><!--tex4ht:label?: x1-9001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-9003r1"></a></span><span 
class="pcrr8t-">package</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">model</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9005r3"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">net</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftweb</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9006r4"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mapper</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9007r5"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">http</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9008r6"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">SHtml</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9009r7"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9011r9"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LongKeyedMapper</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">IdPK</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">getSingleton</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9013r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9014r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedBoolean</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9015r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">owner</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedLongForeignKey</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9016r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedInt</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9017r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">override</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">defaultValue</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">5</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9018r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9019r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedPoliteString</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">128)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9020r18"></a></span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9021r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-9022r20"></a></span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LongKeyedMetaMapper</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">]</span>
   
   </div>
<!--l. 82--><p class="indent" >   Let&#8217;s explore the file.
<!--l. 84--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">package </span>statement tells the Scala compiler what package, or code hierarchy, these classes are
associated with.
<!--l. 87--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">import </span>statements tell the compiler that we&#8217;re going to be using resources from other packages
and <span 
class="pcrr8t-x-x-109">object </span>singletons.
<!--l. 90--><p class="indent" >   <span 
class="pcrr8t-x-x-109">class ToDo extends LongKeyedMapper[ToDo] </span>creates a class which is a subclass of the
<span 
class="pcrr8t-x-x-109">LongKeyedMapper </span>class. This class maps objects, models, to a relational database. The class requires
that the table has a primary key. The <span 
class="pcrr8t-x-x-109">[ToDo] </span>part declares that the Mapper is mapping a ToDo. You may
be thinking that should be inferred by the compiler, but sometimes the compiler needs some extra
hints.
<!--l. 98--><p class="indent" >   <span 
class="pcrr8t-x-x-109">with IdPK </span>mixes a trait into <span 
class="pcrr8t-x-x-109">ToDo</span>. A trait is like a Java interface, that also defines methods. Many
traits can be mixed into a single class. Traits can define rules about what kind of classes they can be mixed
into. Traits are similar to Ruby mixins.
<!--l. 103--><p class="indent" >   In this case, the <span 
class="pcrr8t-x-x-109">IdPK </span>trait adds an <span 
class="pcrr8t-x-x-109">id </span>field to the <span 
class="pcrr8t-x-x-109">ToDo </span>and makes the <span 
class="pcrr8t-x-x-109">id </span>field the primary key of
<span 
class="pcrr8t-x-x-109">ToDo</span>.
<!--l. 107--><p class="indent" >   Within the <span 
class="pcrr8t-x-x-109">ToDo </span>class, <span 
class="pcrr8t-x-x-109">def getSingleton = ToDo </span>defines the singleton or meta object that is
associated with the model class. Huh? Each instance of <span 
class="pcrr8t-x-x-109">ToDo </span>class represents a row in the database. There
may be many instances of the <span 
class="pcrr8t-x-x-109">ToDo </span>class. There is a single object that represents the database
table itself. It has factory methods that will vend new instances of <span 
class="pcrr8t-x-x-109">ToDo</span>s or allow queries
that will return a set of <span 
class="pcrr8t-x-x-109">ToDo</span>s. The <span 
class="pcrr8t-x-x-109">ToDo </span>object singleton is like Smalltalk and Ruby class
objects. It is not like Java static methods as the singleton is an instance rather than a collection
of static methods on a class. <span 
class="pcrr8t-x-x-109">getSingleton </span>associates the <span 
class="pcrr8t-x-x-109">ToDo </span>instance with the <span 
class="pcrr8t-x-x-109">ToDo</span>
singleton.
<!--l. 119--><p class="indent" >   <span 
class="pcrr8t-x-x-109">object done extends MappedBoolean(this) </span>defines a Boolean <span 
class="pcrr8t-x-x-109">done </span>field on the <span 
class="pcrr8t-x-x-109">ToDo</span>
model. <span 
class="pcrr8t-x-x-109">object done </span>declares that there is a field on the <span 
class="pcrr8t-x-x-109">ToDo </span>model. The field is represented as a
singleton, a single instance of a class, per <span 
class="pcrr8t-x-x-109">ToDo </span>model instance. The <span 
class="pcrr8t-x-x-109">done </span>field <span 
class="pcrr8t-x-x-109">extends</span>
<span 
class="pcrr8t-x-x-109">MappedBoolean(this) </span>extends the <span 
class="pcrr8t-x-x-109">MappedBoolean </span>class and is associated with this instance of the
<span 
class="pcrr8t-x-x-109">ToDo </span>model. This is the pattern for defining fields that map between model objects and relations
databases.
<!--l. 128--><p class="indent" >   <span 
class="pcrr8t-x-x-109">object owner extends MappedLongForeignKey(this, User) </span>defines an <span 
class="pcrr8t-x-x-109">owner </span>field on the
<span 
class="pcrr8t-x-x-109">ToDo </span>model. The <span 
class="pcrr8t-x-x-109">owner </span>field is a foreign key reference to the <span 
class="pcrr8t-x-x-109">User </span>model/table.
<!--l. 132--><p class="indent" >   We declare the priority field as a <span 
class="pcrr8t-x-x-109">MappedInt</span>. We subclass <span 
class="pcrr8t-x-x-109">MappedInt </span>and change the default value
of the priority field to 5. The ability to subclass fields and change behavior such as default values,
validation rules, etc. is a very powerful construct. It keeps the business logic right where the field is
defined. It&#8217;s also using Scala rather than some annotations. Because it&#8217;s written in Scala, developers need
not learn a separate annotations &#8220;language&#8221; in order to describe properties of a field. Additionally, the
tools used to develop the application don&#8217;t need to know about or validate a separate set of
annotations.
<!--l. 143--><p class="indent" >   <span 
class="pcrr8t-x-x-109">object desc extends MappedPoliteString(this, 128) </span>defines the <span 
class="pcrr8t-x-x-109">desc </span>field as a <span 
class="pcrr8t-x-x-109">String </span>on
the <span 
class="pcrr8t-x-x-109">ToDo </span>model. The <span 
class="pcrr8t-x-x-109">desc </span>field is the description of the to-do item. A <span 
class="pcrr8t-x-x-109">MappedPoliteString </span>maps a
<span 
class="pcrr8t-x-x-109">String </span>in Scala to a <span 
class="pcrr8t-x-x-109">VARCHAR </span>column in the database. It&#8217;s &#8220;polite&#8221; because it will automatically truncate
the string to the maximum column size, in this case 128 characters, before storing it in the
                                                                                         
                                                                                         
database.
<!--l. 151--><p class="indent" >   Fields have a type beyond <span 
class="pcrr8t-x-x-109">String</span>, <span 
class="pcrr8t-x-x-109">Int</span>, <span 
class="pcrr8t-x-x-109">Boolean</span>. Lift comes with a number of helper field types
including <span 
class="pcrr8t-x-x-109">MappedEmail</span>, <span 
class="pcrr8t-x-x-109">MappedUniqueId</span>, <span 
class="pcrr8t-x-x-109">MappedTimeZone</span>, <span 
class="pcrr8t-x-x-109">MappedPostalCode</span>, etc. The
fields can have their own presentation logic for display and form generation. They can have
validation and conversion rules. For example, <span 
class="pcrr8t-x-x-109">MappedEmail </span>validates the entry against
a regular expression for email addresses as well as converting all input to lower case. The
conversion to lower case also applies to queries against the field. This means that the logic of &#8220;all
email addresses are in lower case&#8221; is encapsulated in a single location in your program, rather
than at each location that does a query against the database. Mapped fields also have read
and write access control rules. Thus, you could create a <span 
class="pcrr8t-x-x-109">MappedTaxpayerId </span>that would
obscure itself on display except if it&#8217;s being presented to the owner. Encapsulation of the
business and presentation logic of the fields like this makes for more secure applications that also
have lower defects. Keeping the semantic meaning (it&#8217;s an email address, not just a <span 
class="pcrr8t-x-x-109">String</span>),
with the fields for as long as possible helps everyone on the project better understand the
code.
<!--l. 171--><p class="indent" >   <span 
class="pcrr8t-x-x-109">object ToDo extends ToDo with LongKeyedMetaMapper[ToDo] </span>creates a singleton object
which provides the meta functionality to the <span 
class="pcrr8t-x-x-109">ToDo </span>class. The <span 
class="pcrr8t-x-x-109">ToDo </span>object is a singleton. One instance will
be created the first time the object is referenced in your program. It extends the <span 
class="pcrr8t-x-x-109">ToDo </span>class that we&#8217;ve
defined with <span 
class="pcrr8t-x-x-109">LongKeyedMetaMapper[ToDo]</span>. The <span 
class="pcrr8t-x-x-109">LongKeyedMetaMapper </span>trait extends the class
with the methods to create instances of <span 
class="pcrr8t-x-x-109">ToDo</span>, perform queries, and do general housekeeping. For
example, the <span 
class="pcrr8t-x-x-109">ToDo </span>object has a <span 
class="pcrr8t-x-x-109">findAll() </span>method that returns a <span 
class="pcrr8t-x-x-109">List[ToDo]</span>. The <span 
class="pcrr8t-x-x-109">findAll()</span>
method is supplied by <span 
class="pcrr8t-x-x-109">LongKeyedMetaMapper</span>.
<!--l. 183--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.4    </span> <a 
 id="x1-100002.4"></a>Boot and Schemifier</h4>
<!--l. 185--><p class="noindent" >Next, let&#8217;s update the <span 
class="pcrr8t-x-x-109">Boot </span>file so that Lift&#8217;s Schemifier will manage the <span 
class="pcrr8t-x-x-109">ToDo </span>table. Open
<span 
class="pcrr8t-x-x-109">src/main/scala/bootstrap/liftweb/Boot.scala </span>and change the line:
   <!--l. 190-->
<a 
 id="x1-10001r3"></a>
<a 
 id="x1-10002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;3: </td><td  
class="content">Original Schemifier line</td></tr></table><!--tex4ht:label?: x1-10001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-10003r1"></a></span><span 
class="pcrr8t-">Schemifier</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">schemify</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">true</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Log</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">infoF</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">)</span>
   
   </div>
<!--l. 196--><p class="indent" >   To:
   <!--l. 199-->
<a 
 id="x1-10006r4"></a>
<a 
 id="x1-10007"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;4: </td><td  
class="content">Updated Schemifier line</td></tr></table><!--tex4ht:label?: x1-10006r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-10008r1"></a></span><span 
class="pcrr8t-">Schemifier</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">schemify</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">true</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Log</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">infoF</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">)</span>
   
   </div>
<!--l. 205--><p class="indent" >   Scala is a statically typed language. That means at compile time, the types of all parameters and
variables is known. This allows the compiler to perform many checks that one would otherwise have to
write tests for. It also allows new team members to better understand code because the type of
parameters to method calls must be declared. Further, a powerful typing system such as Scala&#8217;s allows
                                                                                         
                                                                                         
you to reason about the program&#8217;s behavior.
<!--l. 213--><p class="indent" >   Because the Lift model classes define the columns they expect to be in the database and the types and
rules associated with those columns, Lift provides a mechanism to update the database to reflect the
schema that the model expects. That mechanism is Schemifier which takes a collection of models, inspects
the database and makes sure the right tables, right columns, right indexes, and right constraints are in the
database. Schemifier has lots of different modes and hooks. It can inspect the database and recommend
changes or make the changes for you. It can invoke code on table and column creation, allowing for
migration of table data.
<!--l. 224--><p class="indent" >   The above code adds the <span 
class="pcrr8t-x-x-109">ToDo </span>model to the list of models that Schemifier looks for in the
database.
<!--l. 227--><p class="indent" >   <span 
class="pcrr8t-x-x-109">Boot.scala </span>is the first code that&#8217;s executed when the Lift servlet gets loaded into the servlet
container. For those non-J2EE sorts, it means that <span 
class="pcrr8t-x-x-109">Boot </span>is run early and run only once.
<!--l. 231--><p class="indent" >   <span 
class="pcrr8t-x-x-109">Boot </span>is where you wire your application together. You define rules that route URLs to code.
You define how the database connections are generated, which, by default, looks to JNDI.
You define how database transactions related to the HTTP request/response life-cycle, site
navigation and access control rules, how to determine locale if browser headers are not good
enough, etc. For the ToDo application, we&#8217;ll only change Schemifier as the rest of the settings are
correct.
<!--l. 240--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.5    </span> <a 
 id="x1-110002.5"></a>Snippets: Bridging View and Logic</h4>
<!--l. 242--><p class="noindent" >Web applications present information to the user primarily using HTML or XHTML. HTML designers are
good at creating HTML and CSS, but writing code that involves looping, branching, fields, methods or
logic is not what HTML designers do. Lift bridges between the XHTML markup and the logic that
creates the dynamic content with XML <span 
class="pcrr8t-x-x-109">&#x003C;lift:xxx/&#x003E; </span>tags. These tags refer to Lift snippets...
snippets of code that handle snippets of display logic. Some Lift tag behavior is predefined.
Tags such as <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround/&#x003E; </span>have a default behavior. However, you can create your
own <span 
class="pcrr8t-x-x-109">&#x003C;lift:xxx/&#x003E; </span>tags. We&#8217;re going to create the snippet code for <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.in/&#x003E; </span>and
<span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.out/&#x003E; </span>tags. The <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.in/&#x003E; </span>will only display its sub-children if a User is
logged in. The <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.out/&#x003E; </span>tag will only display its content if no User is logged in.
Thus:
   <!--l. 257-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-11001r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">out</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11002r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Please</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Log</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">In</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Dude</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11003r3"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">out</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 264--><p class="indent" >   Will only display &#8220;Please Log In <span 
class="pplb8t-x-x-109">Dude</span>&#8221; if nobody is logged in.
<!--l. 267--><p class="indent" >   Create the file <span 
class="pcrr8t-x-x-109">src/main/scala/com/liftworkshop/snippet/Util.scala</span>. Populate the file
with:
   <!--l. 271-->
<a 
 id="x1-11004r5"></a>
<a 
 id="x1-11005"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;5: </td><td  
class="content">Util snippet</td></tr></table><!--tex4ht:label?: x1-11004r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-11006r1"></a></span><span 
class="pcrr8t-">package</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">snippet</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11007r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11008r3"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">scala</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">xml</span><span 
class="pcrr8t-">.{</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11009r4"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11010r5"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">model</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11011r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11012r7"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Util</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11013r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11014r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">loggedIn_</span><span 
class="pcrr8t-">?)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">Empty</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11015r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11016r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">out</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11017r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(!</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">loggedIn_</span><span 
class="pcrr8t-">?)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">Empty</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-11018r13"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
                                                                                         
                                                                                         
<!--l. 288--><p class="indent" >   <span 
class="pcrr8t-x-x-109">package com.liftworkshop.snippet </span>defines the package for the code. Lift looks
for classes in the &#8220;snippet&#8221; package of your project. If you look back in <span 
class="pcrr8t-x-x-109">Boot</span>, you&#8217;ll see &#x00A0;
<span 
class="pcrr8t-x-x-109">LiftRules.addToPackages("com.liftworkshop") </span>line. This line tells Lift that your project
package starts with &#8220;com.liftworkshop&#8221;. Lift uses this base package name to look up snippets in the
&#8220;snippet&#8221; sub-package, view code in the &#8220;view&#8221; sub-package, and comet code in the &#8220;comet&#8221;
sub-package.
<!--l. 297--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">import </span>lines tell Scala which other packages we&#8217;re using.
<!--l. 299--><p class="indent" >   <span 
class="pcrr8t-x-x-109">class Util </span>defines the name of the class. By default, Lift looks for a class named &#8220;Util&#8221; when it
encounters the <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.xxx/&#x003E; </span>tag. Lift will convert underscore separated names to CamelCase
names when it looks up classes. Lift then looks for a public method named what comes after the period in
the tag name. In Scala, unless you define a method&#8217;s protection level, it&#8217;s public. Lift also only looks for
methods defined in the class, not on super-classes. This is to avoid any accidental access to methods from
view tags. You can also define custom mapping rules for snippets. Also, Lift will look for a method called
<span 
class="pcrr8t-x-x-109">render </span>on the class if there&#8217;s no period in the tag name. Thus, <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util/&#x003E; </span>will map to
<span 
class="pcrr8t-x-x-109">Util.render</span>.
<!--l. 311--><p class="indent" >   Some examples:
<!--l. 313--><p class="noindent" >
<div class="center" 
>
<!--l. 313--><p class="noindent" >
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><colgroup id="TBL-2-3g"><col 
id="TBL-2-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-1"  
class="td11">     View code             </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-2"  
class="td11"> Class   </td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-3"  
class="td11">Method</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-1"  
class="td11">    <span 
class="pcrr8t-x-x-109">&#x003C;lift:foo/&#x003E;    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-2"  
class="td11"> <span 
class="pcrr8t-x-x-109">Foo </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-3"  
class="td11"><span 
class="pcrr8t-x-x-109">render</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-1"  
class="td11">  <span 
class="pcrr8t-x-x-109">&#x003C;lift:FooBar/&#x003E;  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-2"  
class="td11"><span 
class="pcrr8t-x-x-109">FooBar</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-3"  
class="td11"><span 
class="pcrr8t-x-x-109">render</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-1"  
class="td11">  <span 
class="pcrr8t-x-x-109">&#x003C;lift:foo_bar/&#x003E;  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-2"  
class="td11"><span 
class="pcrr8t-x-x-109">FooBar</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-4-3"  
class="td11"><span 
class="pcrr8t-x-x-109">render</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-1"  
class="td11"><span 
class="pcrr8t-x-x-109">&#x003C;lift:foo_bar.baz/&#x003E;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-2"  
class="td11"><span 
class="pcrr8t-x-x-109">FooBar</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-2-5-3"  
class="td11"> <span 
class="pcrr8t-x-x-109">baz </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-6-1"  
class="td11">                   </td>
</tr></table></div>
</div>
<!--l. 330--><p class="indent" >   <span 
class="pcrr8t-x-x-109">def in(html: NodeSeq) = </span>defines a method that takes a parameter named <span 
class="pcrr8t-x-x-109">html </span>with has
<span 
class="pcrr8t-x-x-109">NodeSeq </span>as the type. We do not need to declare the return type as the compiler will infer it. For any
methods that are moderately complex, it&#8217;s good citizenship to explicitly declare the return type so
someone can look at the code and understand what it&#8217;s doing.
<!--l. 337--><p class="indent" >   The body of the method <span 
class="pcrr8t-x-x-109">if (User.loggedIn_?) html else NodeSeq.Empty </span>returns <span 
class="pcrr8t-x-x-109">html</span>,
the child tags of the XHTML in the view. <span 
class="pcrr8t-x-x-109">User.loggedIn_? </span>is a method on the <span 
class="pcrr8t-x-x-109">User </span>object. It returns
true if a user is logged into the application for the current browser session. In Scala, every statement has a
return type. Thus, if/else is like the Java ternary operator. If a user is logged in, we return the
child XHTML, otherwise we return an empty sequence of nodes, XHTML. Scala does not
require an explicit <span 
class="pcrr8t-x-x-109">return </span>statement as Scala returns the last expression evaluated in the
method.
<!--l. 347--><p class="indent" >   The out method works similarly, but returns the child nodes if no user is logged in.
<!--l. 351--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.6    </span> <a 
 id="x1-120002.6"></a>Lift&#8217;s &#8220;View First&#8221; design</h4>
<!--l. 353--><p class="noindent" >A philosophical digression into a major architectural decision.
<!--l. 355--><p class="indent" >   My first design goal with Lift was to make sure that no programming logic and no programming
symbols make it into the static display templates.
                                                                                         
                                                                                         
<!--l. 358--><p class="indent" >   ERB and JSP and ASP all have the fatal flaw of allowing code in the view. This is bad for a bunch of
reasons. First, it makes editing the templates difficult with HTML layout tools unless those tools are
familiar with the syntax being used. Second, there are &#8220;foreign&#8221; symbols in the layout, which tends to be
less than optimal for the HTML designers. (On the Rails side of things, every Rails team I&#8217;ve seen has a
Ruby coder that also does the design. While this is the norm in the Rails community, it is the exception
when team sizes are more than 2 or 3.) Third, every single Rails, JSP, and ASP project I&#8217;ve ever seen
(and I&#8217;ve been seeing them for a very long time) has some non-trivial amount of business
logic creep into the display. Fourth, Scala has a very nice type system and when the type
system is used correctly, the compiler finds a lot of program errors, but when the code is
buried in templates, one has a much more difficult time using the powerful Scala compiler
tools.
<!--l. 374--><p class="indent" >   So, the static templates in Lift are strictly for display only. They can be manipulated with standard
design tools (e.g., Dreamweaver). They can never contain program logic.
<!--l. 378--><p class="indent" >   Rails&#8217; &#8220;controller first&#8221; dispatch mechanism makes the assumption that there is only one piece of
&#8220;logic&#8221; on the page and the rest is decoration. My experience doing web work is just the opposite. There
are typically 3 or more of pieces of logic on a page (dynamic menu bars, search boxes, shopping cart,
real-time chat, etc.) and having to choose which piece of logic make the &#8220;controller&#8221; is less than
optimal.
<!--l. 386--><p class="indent" >   So, the quintessential use of lift&#8217;s templates are as follows:
   <!--l. 389-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-12001r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12002r2"></a></span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12003r3"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:Show</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">myForm</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">POST</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12004r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12005r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Name</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12006r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">f:name</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">input</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">type</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">text</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">f:name</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12007r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12008r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12009r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Birthyear</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12010r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">f:year</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12011r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">2007</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12012r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">f:year</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12013r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12014r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12015r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&amp;</span><span 
class="pcrr8t-">nbsp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12016r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">input</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">type</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">submit</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">value</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Add</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12017r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12018r18"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:Show</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">myForm</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12019r19"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 412--><p class="indent" >   So we&#8217;ve got a Lift snippet invocation with the valid HTML form and some additional tags. So far
(with the proper name-space declarations) this page is valid XHTML. This page can be viewed in a
browser or opened and edited in Dreamweaver.
<!--l. 417--><p class="indent" >   In Lift, the snippet is the equivalent of a Rails controller: it is the instantiation of a class and invocation
of a method on the class. Because you can have multiple snippets on a page, you can call
out multiple logic streams on a given page and there&#8217;s no need to choose the primary logic
stream.
<!--l. 423--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">form="post" </span>attribute is a shortcut. It automatically wraps the enclosed XHTML in a <span 
class="pcrr8t-x-x-109">&#x003C;form</span>
<span 
class="pcrr8t-x-x-109">method=&#8217;post&#8217; target={current page... it&#8217;s a post-back}&#x003E;...&#x003C;/form&#x003E;</span>
tag.
<!--l. 428--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">&#x003C;f:xxx/&#x003E; </span>tags are bind points for the business logic. They allow your snippet to easily replace
the tag and its children with what is supposed to be displayed.
<!--l. 432--><p class="indent" >   So, your Lift code will look like:
   <!--l. 435-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-12020r1"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Show</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12021r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">myForm</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">xhtml</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12022r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">var</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12023r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">handleYear</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">year</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">String</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12024r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">the</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">&#8217;</span><span 
class="pcrr8t-">s</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">been</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">submitted</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">do</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">something</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12025r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12026r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">xhtml</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">text</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12027r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">year</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">((1900</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">2007).</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12028r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">toList</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">map</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toString</span><span 
class="pcrr8t-">).</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12029r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reverse</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">map</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">)),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12030r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Empty</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">handleYear</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12031r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12032r13"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 452--><p class="indent" >   Note that no display code has crept into the snippet. You&#8217;ve simply bound the XHTML
created by <span 
class="pcrr8t-x-x-109">text() </span>and <span 
class="pcrr8t-x-x-109">select() </span>to the <span 
class="pcrr8t-x-x-109">&#x003C;f:name/&#x003E; </span>and <span 
class="pcrr8t-x-x-109">&#x003C;f:year/&#x003E; </span>tags in the incoming
XHTML.
<!--l. 457--><p class="indent" >   Also, you&#8217;ve bound two functions (the anonymous function <span 
class="pcrr8t-x-x-109">name = _ </span>and <span 
class="pcrr8t-x-x-109">handleYear</span>) to the
XHTML form elements. When the form is posted, these functions (which are bound to local variables)
                                                                                         
                                                                                         
will be statefully invoked.
<!--l. 462--><p class="indent" >   If you are displaying a table rather than a form, then the same binding logic still works. For
example:
   <!--l. 466-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-12033r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">table</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12034r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Show</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">users</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12035r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12036r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;&#x003C;</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">first_name</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">David</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">first_name</span><span 
class="pcrr8t-">&#x003E;&#x003C;/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12037r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;&#x003C;</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">last_name</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Pollak</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">last_name</span><span 
class="pcrr8t-">&#x003E;&#x003C;/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12038r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12039r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">lift</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">Show</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">users</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12040r8"></a></span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">table</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 478--><p class="indent" >   The snippet looks like:
   <!--l. 481-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-12041r1"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Show</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12042r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">users</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">xhtml</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12043r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Users</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">findAll</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">flatMap</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">user</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12044r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">xhtml</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">first_name</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">user</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">firstName</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12045r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">last_name</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">user</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">nameName</span><span 
class="pcrr8t-">))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-12046r6"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 491--><p class="indent" >   If you take the time to clearly define the bind points, then you can have no display code at all in your
snippets.
<!--l. 494--><p class="indent" >   Can display logic slip into a snippet? Yes.
<!--l. 496--><p class="indent" >   Has display logic ever crept into a method called from an ERB template? Yes, and very often it&#8217;s a
source of a potential Cross Site Scripting vulnerability.
<!--l. 500--><p class="indent" >   Has business logic ever crept into an ERB template? Yes.
<!--l. 502--><p class="indent" >   In Lift, display can creep into a snippet, but business logic cannot creep into a the static display
template. Yes, your designers will still have to police putting display logic in the snippet code, but the
coders will not have to police business logic in the templates.
<!--l. 507--><p class="indent" >   Back to our regularly scheduled code writing.
<!--l. 510--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.7    </span> <a 
 id="x1-130002.7"></a>Updating the ToDo view</h4>
<!--l. 512--><p class="noindent" >We&#8217;re going to add view code to our application.
<!--l. 514--><p class="indent" >   Open <span 
class="pcrr8t-x-x-109">src/main/webapp/index.html </span>and replace the file with:
   <!--l. 517-->
<a 
 id="x1-13001r6"></a>
<a 
 id="x1-13002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;6: </td><td  
class="content">index.html</td></tr></table><!--tex4ht:label?: x1-13001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-13003r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:surround</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">with</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">default</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">at</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">content</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-13004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">out</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Please</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-13005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:menu</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">item</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">name</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Login</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Log</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">In</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:menu</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">item</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-13006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">out</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-13007r5"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:surround</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 527--><p class="indent" >   <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround with="default" at="content"&#x003E; </span>surrounds into child content with a
template called <span 
class="pcrr8t-x-x-109">default </span>and places the content of this file at a bind-point called <span 
class="pcrr8t-x-x-109">content</span>. Your page
can bind to multiple child items. Thus your page can define main content, left side content, footer
content, etc. Additionally, templates can be hierarchical and nested. By convention, templates are located
in the <span 
class="pcrr8t-x-x-109">src/main/webapp/templates-hidden </span>directory. Lift will not directly serve request for
directories that have <span 
class="pcrr8t-x-x-109">-hidden </span>in their name.
<!--l. 537--><p class="indent" >   We&#8217;re using our <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.out/&#x003E; </span>tag to display content only if there&#8217;s no user logged
in.
<!--l. 541--><p class="indent" >   <span 
class="pcrr8t-x-x-109">&#x003C;lift:menu.item name="Login"&#x003E;Log In&#x003C;/lift:menu.item&#x003E; </span>tag accesses some Lift built in
snippets to create an <span 
class="pcrr8t-x-x-109">&#x003C;a href=&#8221;...&#8221;/&#x003E; </span>to the page in site navigation called &#8220;Login&#8221;. Thus, your
                                                                                         
                                                                                         
application doesn&#8217;t need to know the URL of the Login page in order to access it and if site navigation
changes, the URL will get updated. Links will not be generated if page access control rules prohibit the
user from accessing the page.
<!--l. 549--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.8    </span> <a 
 id="x1-140002.8"></a>Seeing if the snippet works</h4>
<!--l. 551--><p class="noindent" >Enter <span 
class="pcrr8t-x-x-109">mvn jetty:run </span>on your terminal. Note in the terminal output that Schemifier has created the
<span 
class="pcrr8t-x-x-109">todo </span>table:
   <!--l. 555-->
   <div class="lstlisting"><span class="label"><a 
 id="x1-14001r1"></a></span><span 
class="pcrr8t-">INFO</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">CREATE</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">TABLE</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">INTEGER</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">...</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-14002r2"></a></span><span 
class="pcrr8t-">INFO</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ALTER</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">TABLE</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ADD</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">CONSTRAINT</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo_PK</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">PRIMARY</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">KEY</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">id</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-14003r3"></a></span><span 
class="pcrr8t-">INFO</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">-</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">CREATE</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">INDEX</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo_owner</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ON</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">owner</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">)</span>
   
   </div>
<!--l. 562--><p class="indent" >   Please navigate to   <a 
href="http://localhost:8080" class="url" ><span 
class="pcrr8t-x-x-109">http://localhost:8080</span></a> You should see your application running
and a message asking you to log in. Using the navigation on the left side of your browser,
please click the &#8220;Sign Up&#8221; link. Once you&#8217;ve successfully completed the signup process, you&#8217;ll
be returned to the home page. There should no longer be a message prompting you to log
in.
<!--l. 569--><p class="indent" >   So far, we&#8217;ve created a model to hold our to-do items, written a snippet to bridge between the view
and business logic, and we&#8217;ve seen how to update our view to access the snippet.
<!--l. 573--><p class="indent" >   Next, we&#8217;ll create the view and snippet code that allows us to create a to-do item.
<!--l. 577--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.9    </span> <a 
 id="x1-150002.9"></a>Creating a to-do item</h4>
<!--l. 579--><p class="noindent" >Create a new snippet in <span 
class="pcrr8t-x-x-109">src/main/scala/com/liftworkshop/snippet/TD.scala </span>with the
following code:
   <!--l. 583-->
<a 
 id="x1-15001r7"></a>
<a 
 id="x1-15002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;7: </td><td  
class="content">TD.scala</td></tr></table><!--tex4ht:label?: x1-15001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-15003r1"></a></span><span 
class="pcrr8t-">package</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">snippet</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15005r3"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">com</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftworkshop</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15006r4"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">model</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15008r6"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">net</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">liftweb</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15009r7"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">http</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15010r8"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">SHtml</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15011r9"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">S</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15013r11"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">js</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15014r12"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">JsCmds</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15015r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15016r14"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">mapper</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15017r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15018r16"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15019r17"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Helpers</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15020r18"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15021r19"></a></span><span 
class="pcrr8t-">import</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">scala</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">xml</span><span 
class="pcrr8t-">.{</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Text</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15022r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15023r21"></a></span><span 
class="pcrb8t-">class</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">TD</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15024r22"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15025r23"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">create</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">owner</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">currentUser</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15026r24"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15027r25"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">checkAndSave</span><span 
class="pcrr8t-">():</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Unit</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15028r26"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">validate</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">match</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15029r27"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">case</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Nil</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">save</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">S</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">notice</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Added</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">+</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15030r28"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">case</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">xs</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">S</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">error</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">xs</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">S</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">mapSnippet</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">TD</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">doBind</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15031r29"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15032r30"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15033r31"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">doBind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15034r32"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15035r33"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toForm</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15036r34"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toForm</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15037r35"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">submit</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">submit</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">New</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">checkAndSave</span><span 
class="pcrr8t-">))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15038r36"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15039r37"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">doBind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15040r38"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-15041r39"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 626--><p class="indent" >   There&#8217;s a single top level method: <span 
class="pcrr8t-x-x-109">def add(form: NodeSeq)</span>.
<!--l. 628--><p class="indent" >   <span 
class="pcrr8t-x-x-109">val todo = ToDo.create.owner(User.currentUser) </span>creates an instance of our <span 
class="pcrr8t-x-x-109">ToDo </span>model
and sets the item&#8217;s owner to the currently logged in user. This instance will be visible for the lifespan of
the creation task, not the lifespan of the HTTP request. This statefullness makes it easier to write very
complex applications in Lift because you don&#8217;t have to repopulate object values each time you service a
request.
<!--l. 636--><p class="indent" >   <span 
class="pcrr8t-x-x-109">def checkAndSave(): Unit </span>defines a method. Scala allows you to create methods that live inside
of other methods. These inner methods have access to the variables inside the method scope.
<span 
class="pcrr8t-x-x-109">checkAndSave </span>has a return type of <span 
class="pcrr8t-x-x-109">Unit </span>which is like Java&#8217;s <span 
class="pcrr8t-x-x-109">void</span>. Because <span 
class="pcrr8t-x-x-109">checkAndSave </span>is a
recursive method, its return type must be explicitly defined. <span 
class="pcrr8t-x-x-109">todo.validate </span>checks the validation rules
for each field in <span 
class="pcrr8t-x-x-109">todo</span>. It returns a <span 
class="pcrr8t-x-x-109">List[FieldError] </span>(pronounced &#8220;List of FieldError&#8221;). We <span 
class="pcrr8t-x-x-109">match </span>the
list against a pattern. If the list is <span 
class="pcrr8t-x-x-109">Nil </span>(it has no elements), save the <span 
class="pcrr8t-x-x-109">todo </span>instance and display a notice
                                                                                         
                                                                                         
telling the user that the item was saved. If we have validation failures, display those as errors.
<span 
class="pcrr8t-x-x-109">S.mapSnippet("TD.add", doBind) </span>tells Lift that during the current HTTP request servicing, when
the <span 
class="pcrr8t-x-x-109">TD.add </span>snippet is requested, call the <span 
class="pcrr8t-x-x-109">doBind </span>method rather than looking up the snippet in the
class/method manner. This means that the current state (the current <span 
class="pcrr8t-x-x-109">todo </span>instance) will be
preserved. Yep, it&#8217;s kinda a weird way to think. Please continue reading and it may make more
sense.
<!--l. 655--><p class="indent" >   <span 
class="pcrr8t-x-x-109">def doBind(form: NodeSeq) </span>defines a method that takes XHTML and binds it to business
logic. <span 
class="pcrr8t-x-x-109">"priority" -&#x003E; todo.priority.toForm </span>binds the <span 
class="pcrr8t-x-x-109">&#x003C;todo:priority/&#x003E; </span>tag to
a form element, in this case a <span 
class="pcrr8t-x-x-109">&#x003C;select/&#x003E;</span>, that the priority field generates. <span 
class="pcrr8t-x-x-109">"desc" -&#x003E;</span>&#x00A0;
<span 
class="pcrr8t-x-x-109">todo.desc.toForm </span>does the same for the <span 
class="pcrr8t-x-x-109">desc </span>field. <span 
class="pcrr8t-x-x-109">"submit" -&#x003E;</span>&#x00A0;
<span 
class="pcrr8t-x-x-109">submit("New", checkAndSave) </span>creates a submit button with the value &#8220;New&#8221;. When the form is
processed, the <span 
class="pcrr8t-x-x-109">checkAndSave </span>method will be called.
<!--l. 666--><p class="indent" >   In Lift, you don&#8217;t have to explicitly name HTML form elements. You don&#8217;t have to explicitly look for
parameters of a POST or a GET. Lift takes care of this work for you. You specify the type of the form
element, the default value of that element and the chunk of code, the function, to invoke when the form is
submitted. Lift takes care of managing the form field names and the state for you. This has a bunch of
benefits. First, you don&#8217;t have to coordinate form field names across your team. Second, only the form
fields presented to users can be submitted back which avoids form tampering. Third, form field names
are randomly generated making it very difficult for a hacker to engage in replay attacks. If you want, you
can dive down to the HTTP bare metal and get the parameters. If you want, you can name
your own HTML form elements. But Lift lets you abstract away the HTTP request/response
cycle.
<!--l. 681--><p class="indent" >   In this code, <span 
class="pcrr8t-x-x-109">todo.priority </span>and <span 
class="pcrr8t-x-x-109">todo.desc </span>have taken care of generating their own form
elements. When the form is submitted, those fields will be updated in the instance of <span 
class="pcrr8t-x-x-109">todo </span>created at the
top of the method. The instance of <span 
class="pcrr8t-x-x-109">todo </span>used in <span 
class="pcrr8t-x-x-109">checkAndSave </span>is the same instance that have just its
fields updated. If validation fails, we map the <span 
class="pcrr8t-x-x-109">TD.add </span>snippet to an instance of <span 
class="pcrr8t-x-x-109">doBind </span>(the
<span 
class="pcrr8t-x-x-109">doBind </span>method is turned into a function instance which is an object that is bound to the
current variable scope) that refers to the same instance of <span 
class="pcrr8t-x-x-109">todo</span>. If your head is spinning, don&#8217;t
worry.
<!--l. 693--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.10    </span> <a 
 id="x1-160002.10"></a>Updating the priority and desc fields</h4>
<!--l. 695--><p class="noindent" >Please open the <span 
class="pcrr8t-x-x-109">ToDo.scala </span>file in the model package.
<!--l. 697--><p class="indent" >   Update the <span 
class="pcrr8t-x-x-109">priority </span>object so that it looks like:
   <!--l. 700-->
<a 
 id="x1-16001r8"></a>
<a 
 id="x1-16002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;8: </td><td  
class="content">Update ToDo.scala</td></tr></table><!--tex4ht:label?: x1-16001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-16003r1"></a></span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedInt</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">override</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">defaultValue</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">5</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">override</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">validations</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">validPriority</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">super</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">validations</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">validPriority</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Int</span><span 
class="pcrr8t-">):</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">List</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">FieldError</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16009r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">0</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&amp;&amp;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Nil</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">List</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">FieldError</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Priority</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">must</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">be</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">1-10&#x003C;/</span><span 
class="pcrr8t-">b</span><span 
class="pcrr8t-">&#x003E;))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16011r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">override</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_toForm</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Full</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priorityList</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16013r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Full</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">is</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toString</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16014r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">set</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">f</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toInt</span><span 
class="pcrr8t-">)))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16015r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 718--><p class="indent" >   <span 
class="pcrr8t-x-x-109">override def validations = validPriority _ :: super.validations </span>adds the
<span 
class="pcrr8t-x-x-109">validatePriority </span>function to the list of validation functions for this field. The validation functions are
consulted for each field during validation. They return either an empty list, <span 
class="pcrr8t-x-x-109">Nil</span>, indicating no validation
problems, or they return a list of errors.
<!--l. 724--><p class="indent" >   <span 
class="pcrr8t-x-x-109">def validPriority(in: Int): List[FieldError] </span>defines the method that validates the
                                                                                         
                                                                                         
priority. <span 
class="pcrr8t-x-x-109">if (in &#x003E; 0 &amp;&amp; in &#x003C;= 10) Nil </span>if the priority if valid, return no errors. Otherwise, return a
list of one error: <span 
class="pcrr8t-x-x-109">else List(FieldError(this, &#x003C;b&#x003E;Priority must be 1-10&#x003C;/b&#x003E;))</span>.
<!--l. 730--><p class="indent" >   <span 
class="pcrr8t-x-x-109">override def _toForm </span>override the default form generation for the <span 
class="pcrr8t-x-x-109">priority </span>field.
<span 
class="pcrr8t-x-x-109">select(ToDo.priorityList, </span>create an HTML <span 
class="pcrr8t-x-x-109">&#x003C;select/&#x003E; </span>with a list of values. Set the default value
to the current priority field value (is), converted to a String: <span 
class="pcrr8t-x-x-109">Full(is.toString)</span>. When the form is
submitted, call this function: <span 
class="pcrr8t-x-x-109">f =&#x003E; set(f.toInt)</span>. The function takes a single parameter, <span 
class="pcrr8t-x-x-109">f</span>. The
compiler infers the type of <span 
class="pcrr8t-x-x-109">f </span>to be <span 
class="pcrr8t-x-x-109">String </span>by looking at the signature of the <span 
class="pcrr8t-x-x-109">select() </span>method.
<span 
class="pcrr8t-x-x-109">f.toInt </span>converts the <span 
class="pcrr8t-x-x-109">String </span>to an <span 
class="pcrr8t-x-x-109">Integer </span>and the <span 
class="pcrr8t-x-x-109">set() </span>method is called on the <span 
class="pcrr8t-x-x-109">priority </span>field.
We can safely call <span 
class="pcrr8t-x-x-109">toInt </span>because our function will only be called with one of the values originally
supplied to the <span 
class="pcrr8t-x-x-109">select() </span>function. Lift will not call your function with another value, so you can be sure
that if someone tampers with the form parameters, your application will not be called with a bogus
value.
<!--l. 747--><p class="indent" >   Let&#8217;s update the <span 
class="pcrr8t-x-x-109">desc </span>field to add validators:
   <!--l. 750-->
<a 
 id="x1-16018r9"></a>
<a 
 id="x1-16019"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;9: </td><td  
class="content">Update ToDo.scala</td></tr></table><!--tex4ht:label?: x1-16018r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-16020r1"></a></span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">MappedPoliteString</span><span 
class="pcrr8t-">(</span><span 
class="pcrb8t-">this</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">128)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16021r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">override</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">validations</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16022r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">valMinLen</span><span 
class="pcrr8t-">(3,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">Description</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">must</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">be</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">3</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">characters</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">::</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16023r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">super</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">validations</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16024r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 759--><p class="indent" >   In this case, we&#8217;re using the <span 
class="pcrr8t-x-x-109">valMinLen() </span>validator method built into Lift&#8217;s <span 
class="pcrr8t-x-x-109">MappedString</span>, the
superclass of <span 
class="pcrr8t-x-x-109">MappedPoliteString</span>. By default, <span 
class="pcrr8t-x-x-109">MappedString </span>generates an <span 
class="pcrr8t-x-x-109">&#x003C;input</span>
<span 
class="pcrr8t-x-x-109">type=&#8221;text&#8221;/&#x003E; </span>form element, so we don&#8217;t have to explicitly define a <span 
class="pcrr8t-x-x-109">_toForm </span>method.
<!--l. 765--><p class="indent" >   Finally, let&#8217;s add the <span 
class="pcrr8t-x-x-109">priorityList </span>helper method to our <span 
class="pcrr8t-x-x-109">ToDo </span>object:
   <!--l. 769-->
<a 
 id="x1-16025r10"></a>
<a 
 id="x1-16026"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;10: </td><td  
class="content">Update ToDo.scala</td></tr></table><!--tex4ht:label?: x1-16025r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-16027r1"></a></span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">with</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">LongKeyedMetaMapper</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">]</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16028r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">lazy</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">priorityList</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(1</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">to</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">10).</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16029r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">map</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toString</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toString</span><span 
class="pcrr8t-">))</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-16030r4"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 777--><p class="indent" >   A <span 
class="pcrr8t-x-x-109">lazy val </span>is calculated once, the first time it&#8217;s accessed. <span 
class="pcrr8t-x-x-109">(1 to 10) </span>creates a Range of numbers
from 1 to 10, inclusive. <span 
class="pcrr8t-x-x-109">map </span>passes each number to a function which converts the <span 
class="pcrr8t-x-x-109">Integer </span>to a
<span 
class="pcrr8t-x-x-109">Pair[String, String] </span>(pronounced Pair of Strings). This value has been calculated once and can be
used by any <span 
class="pcrr8t-x-x-109">ToDo.priority </span>for form generation.
<!--l. 785--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.11    </span> <a 
 id="x1-170002.11"></a>Hooking up the view to the form</h4>
<!--l. 787--><p class="noindent" >Open <span 
class="pcrr8t-x-x-109">src/main/webapp/index.html</span>
<!--l. 789--><p class="indent" >   Inside the <span 
class="pcrr8t-x-x-109">&#x003C;lift:surround&#x003E;....&#x003C;/lift:surround&#x003E; </span>tag, insert these tags:
   <!--l. 793-->
<a 
 id="x1-17001r11"></a>
<a 
 id="x1-17002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;11: </td><td  
class="content">Insert into index.html</td></tr></table><!--tex4ht:label?: x1-17001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-17003r1"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:TD</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">form</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">post</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">table</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Description:</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:desc</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">To</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Do</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:desc</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17009r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17011r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17013r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Priority</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17014r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17015r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17016r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:priority</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17017r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">1</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17018r16"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:priority</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17019r17"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17020r18"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17021r19"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17022r20"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&amp;</span><span 
class="pcrr8t-">nbsp</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17023r21"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17024r22"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:submit</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17025r23"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">button</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">New</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">button</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17026r24"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:submit</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17027r25"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17028r26"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">tr</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17029r27"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">table</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17030r28"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:TD</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">add</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-17031r29"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:Util</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">in</span><span 
class="pcrr8t-">&#x003E;</span>
   
                                                                                         
                                                                                         
   </div>
<!--l. 826--><p class="indent" >   Inside the <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.in/&#x003E; </span>snippet tag, we have the <span 
class="pcrr8t-x-x-109">&#x003C;lift:TD.add form=&#8217;post&#8217;/&#x003E; </span>snippet
tag. This tag invokes the <span 
class="pcrr8t-x-x-109">TD.add </span>snippet which binds HTML form elements to the <span 
class="pcrr8t-x-x-109">&#x003C;todo:priority/&#x003E;</span>,
<span 
class="pcrr8t-x-x-109">&#x003C;todo:desc/&#x003E;</span>, and <span 
class="pcrr8t-x-x-109">&#x003C;todo:submit/&#x003E; </span>elements. Because we&#8217;ve specified  <span 
class="pcrr8t-x-x-109">form=&#8217;post&#8217; </span>attribute, Lift
creates a post-back form and places it around the snippet. Lift processes snippets outside-in. Thus, the
<span 
class="pcrr8t-x-x-109">&#x003C;lift:TD.add/&#x003E; </span>snippet tag will only be processed if it is returned from the <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.in/&#x003E;</span>
tag.
<!--l. 836--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.12    </span> <a 
 id="x1-180002.12"></a>Trying it out again</h4>
<!--l. 838--><p class="noindent" >At your terminal, stop the running todo app if it&#8217;s still running. Type <span 
class="pcrr8t-x-x-109">mvn jetty:run </span>and point your
browser to   <a 
href="http://localhost:8080" class="url" ><span 
class="pcrr8t-x-x-109">http://localhost:8080</span></a> and then log in using the username/password you created
when you tested the app last time around. Once you log in, you should see the form that lets you add a
to-do item. It&#8217;s nice to have a &#8220;write only&#8221; application. Next, we&#8217;ll let you view and edit to-do
items.
<!--l. 846--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">2.13    </span> <a 
 id="x1-190002.13"></a>Display and Editting to-do items</h4>
<!--l. 848--><p class="noindent" >Now that we&#8217;ve created a mechanism to add to-do items, it&#8217;s time to display those items and allow
Ajax-style editting of the items.
<!--l. 851--><p class="indent" >   First, let&#8217;s define the view. Insert the following code inside the <span 
class="pcrr8t-x-x-109">&#x003C;lift:Util.in/&#x003E; </span>tag:
   <!--l. 855-->
<a 
 id="x1-19001r12"></a>
<a 
 id="x1-19002"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;12: </td><td  
class="content">index.html inside &#x003C;lift:Util.in/&#x003E;</td></tr></table><!--tex4ht:label?: x1-19001r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19003r1"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">lift:TD</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">list</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">all_id</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">all_todos</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19004r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">div</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">id</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">all_todos</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19005r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">div</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">Exclude</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:exclude</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">div</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19006r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">ul</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19007r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:list</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19008r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">li</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19009r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:check</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">input</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">type</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">checkbox</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:check</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19010r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:priority</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19011r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">1</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">option</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">select</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19012r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:priority</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19013r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">todo:desc</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">To</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Do</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:desc</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19014r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">li</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19015r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">todo:list</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19016r14"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">ul</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19017r15"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">div</span><span 
class="pcrr8t-">&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19018r16"></a></span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">/</span><span 
class="pcrr8t-">lift:TD</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">list</span><span 
class="pcrr8t-">&#x003E;</span>
   
   </div>
<!--l. 875--><p class="indent" >   Some things of note in the above code. Our snippet tag, <span 
class="pcrr8t-x-x-109">&#x003C;lift:TD.list all_id="all_todos"&#x003E;</span>,
has an <span 
class="pcrr8t-x-x-109">all_id </span>attribute. This will pass information, the name of the <span 
class="pcrr8t-x-x-109">id </span>attribute, to the snippet. We can
see the <span 
class="pcrr8t-x-x-109">id </span>attribute on <span 
class="pcrr8t-x-x-109">&#x003C;div id="all_todos"&#x003E;</span>. This defines the section of the HTML that we&#8217;re going
to change each time we service an Ajax request. Finally, <span 
class="pcrr8t-x-x-109">&#x003C;todo:list&#x003E; </span>has a single child <span 
class="pcrr8t-x-x-109">&#x003C;li&#x003E; </span>which
also has bind points. Our snippet will iterate over the list of to-do items, binding each to the children of
<span 
class="pcrr8t-x-x-109">&#x003C;todo:list/&#x003E;</span>.
<!--l. 885--><p class="indent" >   At the top level (<span 
class="pplri8t-x-x-109">not </span>inside the <span 
class="pcrr8t-x-x-109">class TD {...} </span>definition) insert this code:
   <!--l. 889-->
<a 
 id="x1-19019r13"></a>
<a 
 id="x1-19020"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;13: </td><td  
class="content">TD.scala define object</td></tr></table><!--tex4ht:label?: x1-19019r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19021r1"></a></span><span 
class="pcrb8t-">object</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">QueryNotDone</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">extends</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">SessionVar</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">false</span><span 
class="pcrr8t-">)</span>
   
   </div>
<!--l. 894--><p class="indent" >   Lift has a type-safe mechanism for storing variables during the scope of a given session. In Java, you
would do something like casting a value retrieved from the <span 
class="pcrr8t-x-x-109">HttpSession</span>. For example: <span 
class="pcrr8t-x-x-109">String</span>
<span 
class="pcrr8t-x-x-109">myString = (String) httpSession.getAttribute(&#8220;Something&#8221;); </span>The problem with this
                                                                                         
                                                                                         
code is that a developer may not remember that <span 
class="pcrr8t-x-x-109">Something </span>is support to be a <span 
class="pcrr8t-x-x-109">String </span>and put a
<span 
class="pcrr8t-x-x-109">String[] </span>in it. Additionally, there&#8217;s no well defined logic for creating a default value for the
attribute.
<!--l. 903--><p class="indent" >   Lift&#8217;s <span 
class="pcrr8t-x-x-109">SessionVar </span>is type-safe. You cannot put anything other than it&#8217;s defined type into it and when
something comes out of it, it&#8217;s the same type that was put in. A <span 
class="pcrr8t-x-x-109">String </span>is always a <span 
class="pcrr8t-x-x-109">String </span>and a
<span 
class="pcrr8t-x-x-109">Boolean </span>is always a <span 
class="pcrr8t-x-x-109">Boolean</span>. Additionally, the <span 
class="pcrr8t-x-x-109">SessionVar </span>has a default value. If the <span 
class="pcrr8t-x-x-109">SessionVar</span>
accessed, but it is not defined, it will calculate its default value and set itself to the default
value.
<!--l. 911--><p class="indent" >   The above code defines a <span 
class="pcrr8t-x-x-109">SessionVar </span>named <span 
class="pcrr8t-x-x-109">QueryNotDone </span>with a default value of <span 
class="pcrr8t-x-x-109">false</span>.
We do not need to explicitly define that type as Boolean as Scala infers that from the default
value.
<!--l. 916--><p class="indent" >   If <span 
class="pcrr8t-x-x-109">QueryNotDone </span>is <span 
class="pcrr8t-x-x-109">true</span>, only the incomplete to-do items will be displayed.
<!--l. 919--><p class="indent" >   Let&#8217;s define the query that will retrieve the ToDo rows from the database. Insert this method into the
body of the TD class in TD.scala:
   <!--l. 923-->
<a 
 id="x1-19022r14"></a>
<a 
 id="x1-19023"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;14: </td><td  
class="content">toShow method on the TD class</td></tr></table><!--tex4ht:label?: x1-19022r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19024r1"></a></span><span 
class="pcrr8t-">private</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">toShow</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19025r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">findAll</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">By</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">owner</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">User</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">currentUser</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19026r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">if</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">QueryNotDone</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">By</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">false</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19027r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">else</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Ignore</span><span 
class="pcrr8t-">[</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">],</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19028r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">OrderBy</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Ascending</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19029r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">OrderBy</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Descending</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19030r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">OrderBy</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Ascending</span><span 
class="pcrr8t-">))</span>
   
   </div>
<!--l. 934--><p class="indent" >   We&#8217;re defining the <span 
class="pcrr8t-x-x-109">toShow </span>method which returns a <span 
class="pcrr8t-x-x-109">List[ToDo]</span>. This method calls the
<span 
class="pcrr8t-x-x-109">findAll() </span>method on the <span 
class="pcrr8t-x-x-109">ToDo </span>object with a bunch of query parameters. <span 
class="pcrr8t-x-x-109">By(ToDo.owner,</span>
<span 
class="pcrr8t-x-x-109">User.currentUser) </span>tells the query to only return the rows where <span 
class="pcrr8t-x-x-109">owner </span>equals the <span 
class="pcrr8t-x-x-109">User </span>who is
currently logged in. Next, we test <span 
class="pcrr8t-x-x-109">QueryNotDone</span>. If it&#8217;s <span 
class="pcrr8t-x-x-109">true</span>, we add an additional constraint: <span 
class="pcrr8t-x-x-109">done</span>
equals <span 
class="pcrr8t-x-x-109">false</span>, otherwise we have a dummy query parameter: <span 
class="pcrr8t-x-x-109">Ignore</span>. Finally, we define how the to-do
items should be ordered.
<!--l. 944--><p class="indent" >   Next, we add a method to the TD class that will render the description field:
   <!--l. 948-->
<a 
 id="x1-19031r15"></a>
<a 
 id="x1-19032"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;15: </td><td  
class="content">desc method in TD class</td></tr></table><!--tex4ht:label?: x1-19031r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19033r1"></a></span><span 
class="pcrr8t-">private</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">JsCmd</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19034r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">swappable</span><span 
class="pcrr8t-">(&#x003C;</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;{</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">}&#x003C;/</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19035r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;{</span><span 
class="pcrr8t-">ajaxText</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19036r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">).</span><span 
class="pcrr8t-">save</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">()})}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19037r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x003C;/</span><span 
class="pcrr8t-">span</span><span 
class="pcrr8t-">&#x003E;)</span>
   
   </div>
<!--l. 957--><p class="indent" >   We define a private method, <span 
class="pcrr8t-x-x-109">desc</span>. It takes a <span 
class="pcrr8t-x-x-109">ToDo </span>instance and a function, <span 
class="pcrr8t-x-x-109">reDraw</span>, that will
redisplay the list of to-do items. It&#8217;s a function that takes no parameters, but returns a <span 
class="pcrr8t-x-x-109">JsCmd</span>. A <span 
class="pcrr8t-x-x-109">JsCmd </span>is
a JavaScript command that the browser can execute. This is the JavaScript that will be sent back to the
browser in response to an Ajax request.
<!--l. 964--><p class="indent" >   <span 
class="pcrr8t-x-x-109">swappable </span>creates HTML that displays the first parameter, a <span 
class="pcrr8t-x-x-109">&#x003C;span/&#x003E; </span>containing the <span 
class="pcrr8t-x-x-109">ToDo</span>&#8217;s <span 
class="pcrr8t-x-x-109">desc</span>.
When user clicks on the swappable, it swaps to display the second parameter, a <span 
class="pcrr8t-x-x-109">&#x003C;span/&#x003E; </span>containing an
<span 
class="pcrr8t-x-x-109">ajaxText </span>field. The user can edit the <span 
class="pcrr8t-x-x-109">ajaxText </span>field and when the field loses focus or the user presses
<span 
class="pcrr8t-x-x-109">Enter</span>, the updated text is sent back to the server via an Ajax call and the <span 
class="pcrr8t-x-x-109">swappable </span>swaps itself back
to displaying the first parameter.
<!--l. 973--><p class="indent" >   When the server receives the Ajax call, it passes the parameter to the function: <span 
class="pcrr8t-x-x-109">v =&#x003E;</span>&#x00A0;
<span 
class="pcrr8t-x-x-109">{td.desc(v).save; reDraw()}</span>, which sets the <span 
class="pcrr8t-x-x-109">desc </span>field and saves the <span 
class="pcrr8t-x-x-109">ToDo </span>instance and then
calls reDraw to update the browser. The user sees the updated list of to-do items.
                                                                                         
                                                                                         
<!--l. 980--><p class="indent" >   Next, add this method to the TD class:
   <!--l. 983-->
<a 
 id="x1-19038r16"></a>
<a 
 id="x1-19039"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;16: </td><td  
class="content">doList method in TD class</td></tr></table><!--tex4ht:label?: x1-19038r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19040r1"></a></span><span 
class="pcrr8t-">private</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">doList</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">JsCmd</span><span 
class="pcrr8t-">)(</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">):</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19041r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">toShow</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19042r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">flatMap</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19043r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19044r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">check</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ajaxCheckbox</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19045r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">done</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">).</span><span 
class="pcrr8t-">save</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">()}),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19046r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19047r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ajaxSelect</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">ToDo</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priorityList</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">Full</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toString</span><span 
class="pcrr8t-">),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19048r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">priority</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">toInt</span><span 
class="pcrr8t-">).</span><span 
class="pcrr8t-">save</span><span 
class="pcrr8t-">;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">()}),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19049r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">desc</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">td</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19050r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">))</span>
   
   </div>
<!--l. 999--><p class="indent" >   We&#8217;re defining the <span 
class="pcrr8t-x-x-109">doList </span>method which takes two parameters: <span 
class="pcrr8t-x-x-109">reDraw </span>and <span 
class="pcrr8t-x-x-109">html</span>. The parameter
list is split into two lists to allow the method to be <span 
class="pplri8t-x-x-109">curried</span>. This means we can create a function that has
the first parameter supplied, but it does not have the second parameter supplied. We&#8217;ll see more of this in
a minute.
<!--l. 1006--><p class="indent" >   This method calls <span 
class="pcrr8t-x-x-109">toShow </span>to get the list of to-do items to show. Using the <span 
class="pcrr8t-x-x-109">flatMap </span>method, we
iterate over each to-do item and <span 
class="pcrr8t-x-x-109">bind</span>ing the item to the incoming html. We bind <span 
class="pcrr8t-x-x-109">&#x003C;todo:check/&#x003E; </span>to an
<span 
class="pcrr8t-x-x-109">ajaxCheckbox</span>. An <span 
class="pcrr8t-x-x-109">ajaxCheckbox </span>generates the HTML to display a checkbox. When the
checkbox is toggled, an Ajax request is made on the server and Lift forwards the new value
of the checkbox to the function. The function, <span 
class="pcrr8t-x-x-109">v =&#x003E; {td.done(v).save; reDraw()}</span>,
updates the to-do item&#8217;s done field and saves the to-do item, then it calls <span 
class="pcrr8t-x-x-109">reDraw </span>to update the
browser.
<!--l. 1016--><p class="indent" >   The same thing is done with the <span 
class="pcrr8t-x-x-109">&#x003C;todo:priority/&#x003E; </span>and <span 
class="pcrr8t-x-x-109">&#x003C;todo:desc/&#x003E; </span>tags.
<!--l. 1019--><p class="indent" >   Finally, we add the list method to the TD class:
   <!--l. 1022-->
<a 
 id="x1-19053r17"></a>
<a 
 id="x1-19054"></a>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Listing&#x00A0;17: </td><td  
class="content">list method in TD class</td></tr></table><!--tex4ht:label?: x1-19053r2 --><div class="lstlisting"><span class="label"><a 
 id="x1-19055r1"></a></span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">list</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">:</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19056r2"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">val</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">id</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">S</span><span 
class="pcrr8t-">.</span><span 
class="pcrr8t-">attr</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">all_id</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">).</span><span 
class="pcrr8t-">open_</span><span 
class="pcrr8t-">!</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19057r3"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19058r4"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">inner</span><span 
class="pcrr8t-">():</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">NodeSeq</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19059r5"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrb8t-">def</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">=</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">SetHtml</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">id</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">inner</span><span 
class="pcrr8t-">())</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19060r6"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19061r7"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">bind</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">todo</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">html</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19062r8"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">exclude</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19063r9"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">ajaxCheckbox</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">QueryNotDone</span><span 
class="pcrr8t-">,</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">=&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">{</span><span 
class="pcrr8t-">QueryNotDone</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">v</span><span 
class="pcrr8t-">);</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">}),</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19064r10"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">list</span><span 
class="pcrr8t-">"</span><span 
class="pcrr8t-">&#x00A0;</span><span class="lstinline"></span><span 
class="pcrb8t-">-&#x003E;</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">doList</span><span 
class="pcrr8t-">(</span><span 
class="pcrr8t-">reDraw</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">_</span><span 
class="pcrr8t-">)</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19065r11"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">}</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19066r12"></a></span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19067r13"></a></span><span 
class="pcrr8t-">&#x00A0;</span><span 
class="pcrr8t-">inner</span><span 
class="pcrr8t-">()</span><span 
class="pcrr8t-">&#x00A0;</span><br /><span class="label"><a 
 id="x1-19068r14"></a></span><span 
class="pcrr8t-">}</span>
   
   </div>
<!--l. 1041--><p class="indent" >   Because the list method is public, Lift will call it when Lift encounters the <span 
class="pcrr8t-x-x-109">&#x003C;lift:TD.list/&#x003E; </span>tag in
the view code.
<!--l. 1044--><p class="indent" >   <span 
class="pcrr8t-x-x-109">val id = S.attr("all_id").open_! </span>retrieves the attribute <span 
class="pcrr8t-x-x-109">all_id </span>from the snippet tag and
stores it in the <span 
class="pcrr8t-x-x-109">id </span>variable.
<!--l. 1048--><p class="indent" >   We define the <span 
class="pcrr8t-x-x-109">inner </span>method. This method is bound to the variables in <span 
class="pcrr8t-x-x-109">list</span>&#8217;s scope.
<!--l. 1051--><p class="indent" >   Inside <span 
class="pcrr8t-x-x-109">inner</span>, we define the <span 
class="pcrr8t-x-x-109">reDraw </span>method which creates an <span 
class="pcrr8t-x-x-109">SetHtmlJsCmd </span>with the <span 
class="pcrr8t-x-x-109">NodeSeq</span>
generated by calling the <span 
class="pcrr8t-x-x-109">inner </span>method. <span 
class="pcrr8t-x-x-109">SetHtml </span>will set the HTML children to a new value. In this
case, it&#8217;s the updated HTML based on redrawing all the to-do items.
<!--l. 1057--><p class="indent" >   The <span 
class="pcrr8t-x-x-109">bind() </span>call binds the view template to an ajaxCheckbox and the list of our to-do
items.
<!--l. 1060--><p class="indent" >   Well... that&#8217;s all the code we need to write. Time to play with our new application.
<!--l. 1063--><p class="indent" >   At the terminal, type: <span 
class="pcrr8t-x-x-109">mvn clean jetty:run</span>. The clean part of the command tells Maven to
remove any previously compiled files. It&#8217;s best practice to-do a <span 
class="pcrr8t-x-x-109">clean </span>every couple of compile
cycles.
<!--l. 1068--><p class="indent" >   Point your browser at   <a 
href="http://localhost:8080" class="url" ><span 
class="pcrr8t-x-x-109">http://localhost:8080</span></a> and you&#8217;ll see your application running. Log in.
You&#8217;ll see any to-do items that you created in &#8220;write only&#8221; mode. You can mark to-do items done and
the list instantly updates. You can click on the description of any item and it&#8217;ll swap to an
editable field. If you log out and log in as a different user, you&#8217;ll have a fresh set of to-do
items.
                                                                                         
                                                                                         
    
</body></html> 

                                                                                         


